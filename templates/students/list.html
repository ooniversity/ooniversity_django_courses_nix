{% extends "base.html" %}
{% load staticfiles %}

{% block title %}pyBursa - Студенты{% endblock title %}

{% block nav_class_student %}active{% endblock %}

{% block content %}
<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-success" role="alert" aria-label="Close">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    <div class="col-sm-12">
        <a href="{% url 'students:create' %}" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Добавить нового студента</a>
    </div>
    <h1>Список студентов</h1>
    <table class="table table-hover">
        <thead class="thead-inverse">
        <tr>
            <th>#</th>
            <th>фамилия имя</th>
            <th>адрес</th>
            <th>Skype</th>
            <th>Курсы</th>
            <th colspan="2"></th>
        </tr>
        </thead>
        <tbody>
        {% for student in students %}
        <tr>
            <th>{{ student.id }}</th>
            <td><a href="{% url 'students:detail' student_id=student.id %}">{{ student.surname }} {{ student.name }}</a></td>
            <td>{{ student.address }}</td>
            <td>{{ student.skype }}</td>
            <td>
                {% for course in student.courses.all %}
                <p><a href="{% url 'courses:detail' course_id=course.id %}">{{ course.name }}</a></p>
                {% endfor %}
            </td>
            <td>
                <a href="{% url 'students:edit' student_id=student.id %}" class="btn btn-primary">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Изменить
                </a>
            </td>
            <td>
                <a href="{% url 'students:delete' student_id=student.id %}" class="btn btn-primary">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Удалить
                </a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}