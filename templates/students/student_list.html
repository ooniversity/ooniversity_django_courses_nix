{% extends 'base.html' %}

{% block title%}Students{% endblock %}


{% block active_students_class %}class="active"{% endblock %}


{% block content %}

{% if messages %}
<div class="alert alert-success" role="alert">
    <ul class="messages">
        {% for message in messages %}
        <li
        {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<div class="panel panel-default">
    <div class="panel-heading"><h2>Students list</h2></div>
    <div class="panel-body">
        <div class='otherContent'></div>
        <!--<button type="button" class="btn btn-default">Добавить нового студента</button>-->
        <ul class="nav nav-pills">
            <li role="presentation" class="active"><a href="{% url 'students:add' %}"><span class="glyphicon glyphicon-plus" aria-hidden="true">&nbsp;</span>Добавить нового студента</a></li>
        </ul>
    </div>
    <!-- <h2>Students list</h2> -->
    <!-- Table -->
    <table class="table">
        <tr class='cust_div'>
            <th>#</th>
            <th>Name</th>
            <th>Address</th>
            <th>skype</th>
            <th>course</th>
        </tr>
        {% if student_list %}
        {% for student in student_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{% url 'students:detail' student.id %}">{{ student.name}} {{ student.surname}}</a></td>
            <td>{{ student.address}}</td>
            <td>{{ student.skype}}</td>
            <td>
                {% for crs in student.courses.all %}
                <a href="{% url 'courses:detail' crs.id %}">{{ crs.name}}</a>
                <br>
                {% endfor %}
            </td>
            <td>
                <ul class="nav nav-pills">
                    <li role="presentation" class="active"><a href="{% url 'students:edit' student.id %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true">&nbsp;</span>Изменить</a>
                    </li>
                </ul>
            </td>
            <td>
                <ul class="nav nav-pills">
                    <li role="presentation" class="active"><a href="{% url 'students:remove' student.id %}"><span class="glyphicon glyphicon-remove" aria-hidden="true">&nbsp;</span>Удалить</a>
                    </li>
                </ul>
            </td>
        </tr>
        {% endfor %}
        {% else %}
        <p>No students are available.</p>
        {% endif %}
    </table>
    {% if is_paginated %}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li>
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                    <span aria-hidden="true"><< previous</span>
                </a>
                {% endif %}
            </li>
            {% for page_num in paginator.page_range %}
            <li><a href="?page={{ page_num }}">{{ page_num }}</a></li>
            {% endfor %}
            <li>
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                    <span aria-hidden="true">next >></span>
                </a>
                {% endif %}
            </li>
        </ul>
    </nav>
    {% endif %}

</div>
{% endblock %}